<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>FlightLang Docs</title>
  <meta name="description" content="Documentation for the FlightLang drone mission DSL.">
  <link rel="icon" href="assets/logo.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script>document.addEventListener('DOMContentLoaded', () => { if(window.hljs) hljs.highlightAll(); });</script>
  <script defer src="script.js"></script>
  <style>
    .docs { display:grid; grid-template-columns: 240px 1fr; gap: 1rem; }
    .toc a { display:block; padding:.4rem .6rem; border-radius:.5rem; color: var(--muted); }
    .toc a:hover { color: var(--text); background: color-mix(in oklab, var(--panel) 90%, transparent); }
    @media (max-width: 900px) { .docs { grid-template-columns: 1fr; } }
  </style>
</head>
<body>
  <nav class="nav">
    <div class="container nav-inner">
      <a class="brand" href="/">
        <img src="assets/logo.svg" alt="FlightLang logo">
        <span>FlightLang</span>
      </a>
      <div class="nav-links">
        <a href="/">Home</a>
        <a href="/docs/">Docs</a>
        <a href="https://github.com/flightlang" target="_blank" rel="noopener">GitHub</a>
        <button id="theme-toggle" class="btn ghost" aria-label="Toggle theme">ðŸŒ—</button>
        <a class="btn primary" href="#install">Install</a>
      </div>
      <button id="menu-btn" class="btn ghost menu-btn" aria-label="Menu">â˜°</button>
    </div>
    <div id="mobile" class="mobile container">
      <a href="/">Home</a>
      <a href="/docs/">Docs</a>
      <a href="https://github.com/flightlang" target="_blank" rel="noopener">GitHub</a>
      <a class="btn primary" href="#install">Install</a>
    </div>
  </nav>

  <header class="hero">
    <div class="container">
      <span class="badge">Documentation</span>
      <h1>FlightLang Docs</h1>
      <p class="lead">Everything you need to install, learn the syntax, and generate code for simulation or controllers.</p>
    </div>
  </header>

  <main class="section">
    <div class="container docs">
      <aside class="toc">
        <div class="card">
          <strong>On this page</strong>
          <a href="#install">Install</a>
          <a href="#hello">Hello mission</a>
          <a href="#syntax">Syntax</a>
          <a href="#actions">Actions & events</a>
          <a href="#backends">Backends</a>
          <a href="#roadmap">Roadmap & safety</a>
        </div>
      </aside>
      <article class="content">
        <section id="install">
          <h2>Install</h2>
          <p>FlightLang provides a CLI that compiles <code>.fl</code> into runnable code.</p>
          <div class="code"><pre><code class="language-bash"># Python backend (run directly)
python -m flightlang.cli run examples/survey.fl

# Build to a standalone Python file
python -m flightlang.cli build examples/survey.fl -o out.py
python out.py

# Generate a Rust crate (Cargo project)
python -m flightlang.cli build examples/survey.fl --backend rust --outdir mission_rs
cd mission_rs && cargo run</code></pre></div>
        </section>

        <section id="hello">
          <h2>Hello mission</h2>
          <div class="code"><pre><code class="language-plaintext">mission Hello {
  state Idle {
    on arm -> Takeoff
  }
  state Takeoff {
    action climb_to(20 m)
    on reached_altitude -> RTL
  }
  state RTL {
    action return_to_launch()
    on landed -> Done
  }
  state Done { }
}</code></pre></div>
          <p class="small">Run it with <code>python -m flightlang.cli run hello.fl</code>.</p>
        </section>

        <section id="syntax">
          <h2>Syntax</h2>
          <ul>
            <li><strong>Variables with units</strong>: <code>let cruise_alt: m = 60 m</code></li>
            <li><strong>States</strong> contain <em>actions</em>, <em>transitions</em>, and optional <em>deadlines</em>.</li>
            <li><strong>Expressions</strong> support numbers, strings, identifiers, and simple calls (e.g., <code>waypoint_grid(...)</code>).</li>
          </ul>
        </section>

        <section id="actions">
          <h2>Actions & events</h2>
          <p>Actions map to platform behaviors; events trigger transitions:</p>
          <div class="grid cards">
            <div class="card"><code>climb_to(alt)</code><br><span class="small">Optional: <code>@ speed</code></span></div>
            <div class="card"><code>goto(waypoint_grid(...))</code></div>
            <div class="card"><code>sidestep(dist) then resume</code></div>
            <div class="card"><code>return_to_launch()</code></div>
          </div>
          <p class="small">Events are user-defined (e.g., <code>arm</code>, <code>reached_altitude</code>, <code>grid_complete</code>).</p>
        </section>

        <section id="backends">
          <h2>Backends</h2>
          <ul>
            <li><strong>Python</strong>: generates runnable Python with a tiny runtime for deterministic simulation.</li>
            <li><strong>Rust</strong>: generates a Cargo project with action stubs; integrate with PX4/ROS 2 as needed.</li>
          </ul>
          <div class="callout">
            PX4/ROS 2 integrations are provided as <em>stubs</em>. Do not use for real flight without proper integration and testing.
          </div>
        </section>

        <section id="roadmap">
          <h2>Roadmap & safety</h2>
          <ul>
            <li>Static analysis for unreachable states and unsafe transitions</li>
            <li>Formal safety contracts (timing, geofence compliance)</li>
            <li>Full MAVSDK/ROS 2 integration</li>
            <li>LSP + editor tooling</li>
          </ul>
          <p class="small">Status: Early Alpha. Not flight-certified.</p>
        </section>
      </article>
    </div>
  </main>

  <footer class="footer">
    <div class="container" style="display:flex; justify-content: space-between; align-items:center; gap:1rem; flex-wrap:wrap;">
      <div style="display:flex; align-items:center; gap:.6rem;">
        <img src="assets/logo.svg" alt="" style="height:20px;width:20px;opacity:.9;">
        <span class="small">Â© 2025 FlightLang</span>
      </div>
      <div class="small">
        <a href="/">Home</a> Â· <a href="https://github.com/flightlang" target="_blank" rel="noopener">GitHub</a>
      </div>
    </div>
  </footer>
</body>
</html>
